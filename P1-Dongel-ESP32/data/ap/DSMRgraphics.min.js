/**
 * Minified by jsDelivr using Terser v5.15.1.
 * Original file: /gh/mhendriks/P1-Dongel-ESP32@4.7.3/cdn/DSMRgraphics.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
let TimerActual,actPoint=0,maxPoints=100;var actLabel="-",gasDelivered=0,electrData=createChartDataContainer(),actElectrData=createChartDataContainer(),actGasData=createChartDataContainer(),actWaterData=createChartDataContainer();function createChartDataContainer(){let a={labels:[],datasets:[]};return a}function createChartDataContainerWithStack(){let a={labels:[],datasets:[],stack:[]};return a}function createDatasetBAR(a,t,e,r){let s={};return s.fill=a,s.borderColor=t,s.backgroundColor=t,s.data=[],s.label=e,s.stack=r,s}function createDatasetLINE(a,t,e){let r={type:"line"};return r.fill=a,r.borderColor=t,r.backgroundColor=t,r.data=[],r.label=e,r}var optionsGLOBAL={plugins:{labels:!1},responsive:!0,maintainAspectRatio:!0,scales:{yAxes:[{ticks:{beginAtZero:!0},scaleLabel:{display:!0,labelString:"---"}}]}},actElectrOptions=structuredClone(optionsGLOBAL);actElectrOptions.scales.yAxes[0].scaleLabel.labelString="kilo Watt";var hourOptions=structuredClone(optionsGLOBAL);hourOptions.scales.yAxes[0].scaleLabel.labelString="Watt/Uur";var dayOptions=structuredClone(optionsGLOBAL);dayOptions.scales.yAxes[0].scaleLabel.labelString="kWh";var monthOptions=structuredClone(optionsGLOBAL);monthOptions.scales.yAxes[0].scaleLabel.labelString="kWh";var optionsGAS=structuredClone(optionsGLOBAL);optionsGAS.scales.yAxes[0].scaleLabel.labelString="m3";var myElectrChart,myGasChart,myWaterChart,optionsWATER=structuredClone(optionsGLOBAL);function renderElectrChart(a,t){myElectrChart&&myElectrChart.destroy();var e=document.getElementById("dataChart").getContext("2d");myElectrChart=new Chart(e,{type:"bar",data:a,options:t})}function renderWaterChart(a){myWaterChart&&myWaterChart.destroy();var t=document.getElementById("waterChart").getContext("2d");myWaterChart=new Chart(t,{type:"line",data:a,options:optionsWATER})}function renderGasChart(a){myGasChart&&myGasChart.destroy();var t=document.getElementById("gasChart").getContext("2d");myGasChart=new Chart(t,{type:"line",data:a,options:optionsGAS})}function showHistGraph(a,t){if(copyDataToChart(a,t),renderElectrChart(electrData,"Hours"==t?hourOptions:dayOptions),myElectrChart.update(),HeeftGas){renderGasChart(gasData);var e="dm3";"p1-q"==Dongle_Config&&(e="kJ"),myGasChart.options.scales.yAxes[0].scaleLabel.labelString=e,myGasChart.update(),document.getElementById("gasChart").style.display="block"}HeeftWater&&(renderWaterChart(waterData),myGasChart.options.scales.yAxes[0].scaleLabel.labelString="dm3",myWaterChart.update(),document.getElementById("waterChart").style.display="block"),document.getElementById("lastHours").style.display="none",document.getElementById("lastDays").style.display="none",document.getElementById("lastMonths").style.display="none",document.getElementById("dataChart").style.display="p1-q"==Dongle_Config?"none":"block"}function showMonthsGraph(a,t){if(copyMonthsToChart(a,t),renderElectrChart(electrData,monthOptions),myElectrChart.update(),HeeftGas){renderGasChart(gasData);var e="m3";"p1-q"==Dongle_Config&&(e="kJ"),myGasChart.options.scales.yAxes[0].scaleLabel.labelString=e,myGasChart.update(),document.getElementById("gasChart").style.display="block"}HeeftWater&&(renderWaterChart(waterData),myWaterChart.options.scales.yAxes[0].scaleLabel.labelString="m3",myWaterChart.update(),document.getElementById("waterChart").style.display="block"),document.getElementById("lastHours").style.display="none",document.getElementById("lastDays").style.display="none",document.getElementById("lastMonths").style.display="none",document.getElementById("dataChart").style.display="p1-q"==Dongle_Config?"none":"block",document.getElementById("mCOST").checked=!1}function copyDataToChart(a,t){electrData=createChartDataContainerWithStack(),gasData=createChartDataContainerWithStack(),waterData=createChartDataContainerWithStack();var e=createDatasetBAR("false","red","Gebruikt","STACK"),r=createDatasetBAR("false","green","Opgewekt","STACK"),s=createDatasetLINE("false","blue","Gas Gebruikt");"p1-q"==Dongle_Config&&(s.label="Warmte Gebruikt");var l=createDatasetLINE("false","blue","Water Gebruikt"),o=0;for(let d=a.data.length+a.actSlot;d>a.actSlot+1;d--){var n=d%a.data.length;electrData.labels.push(formatGraphDate(t,a.data[n].date)),gasData.labels.push(formatGraphDate(t,a.data[n].date)),waterData.labels.push(formatGraphDate(t,a.data[n].date)),"Hours"==t?(a.data[n].p_edw>=0&&(e.data[o]=1*a.data[n].p_edw),a.data[n].p_erw>=0&&(r.data[o]=-1*a.data[n].p_erw)):(a.data[n].p_ed>=0&&(e.data[o]=(1*a.data[n].p_ed).toFixed(3)),a.data[n].p_er>=0&&(r.data[o]=(-1*a.data[n].p_er).toFixed(3))),a.data[n].p_gd>=0&&(s.data[o]=(1e3*a.data[n].p_gd).toFixed(0)),a.data[n].water>=0&&(l.data[o]=(1e3*a.data[n].water).toFixed(0)),o++}electrData.datasets.push(e),electrData.datasets.push(r),gasData.datasets.push(s),waterData.datasets.push(l)}function copyMonthsToChart(a){console.log("Now in copyMonthsToChart().."),electrData=createChartDataContainerWithStack(),gasData=createChartDataContainerWithStack(),waterData=createChartDataContainerWithStack();var t=createDatasetBAR("false","red","Gebruikt deze periode","DP"),e=createDatasetBAR("false","green","Opgewekt deze periode","DP"),r=createDatasetBAR("false","orange","Gebruikt vorige periode","RP"),s=createDatasetBAR("false","lightgreen","Opgewekt vorige periode","RP"),l=createDatasetLINE("false","blue","Gas deze periode");"p1-q"==Dongle_Config&&(l.label="Warmte deze periode");var o=createDatasetLINE("false","blue","Gas vorige periode");"p1-q"==Dongle_Config&&(o.label="Warmte vorige periode");var n,d=createDatasetLINE("false","blue","Water deze periode"),c=createDatasetLINE("false","lightblue","Water vorige periode"),i=a.data.length+a.actSlot,p=i-12,h=0,u=0;for(let D=i;D>p;D--)n=D%a.data.length,h=math.mod(n-12,a.data.length),electrData.labels.push(formatGraphDate("Months",a.data[n].date)),gasData.labels.push(formatGraphDate("Months",a.data[n].date)),waterData.labels.push(formatGraphDate("Months",a.data[n].date)),a.data[n].p_ed>=0&&(t.data[u]=(1*a.data[n].p_ed).toFixed(3),r.data[u]=(1*a.data[h].p_ed).toFixed(3)),a.data[n].p_er>=0&&(e.data[u]=(-1*a.data[n].p_er).toFixed(3),s.data[u]=(-1*a.data[h].p_er).toFixed(3)),a.data[n].p_gd>=0&&(l.data[u]=a.data[n].p_gd,o.data[u]=a.data[h].p_gd),a.data[n].water>=0&&(d.data[u]=a.data[n].water,c.data[u]=a.data[h].water),u++;electrData.datasets.push(t),electrData.datasets.push(e),electrData.datasets.push(r),electrData.datasets.push(s),gasData.datasets.push(l),gasData.datasets.push(o),waterData.datasets.push(d),waterData.datasets.push(c),document.getElementById("lastMonths").style.display="none",document.getElementById("dataChart").style.display="block"}function copyActualToChart(a){for(i in a){if("timestamp"==i){if(a[i].value==actLabel)return void console.log("actLabel["+actLabel+"] == value["+a[i].value+"] =>break!");actElectrData.labels.push(formatGraphDate("Actual",a[i].value)),actGasData.labels.push(formatGraphDate("Actual",a[i].value)),actLabel=a[i].value}"power_delivered_l1"==i&&(actElectrData.datasets[0].data[actPoint]=a[i].value.toFixed(3)),"power_delivered_l2"==i&&(actElectrData.datasets[1].data[actPoint]=a[i].value.toFixed(3)),"power_delivered_l3"==i&&(actElectrData.datasets[2].data[actPoint]=a[i].value.toFixed(3)),"power_returned_l1"==i&&(actElectrData.datasets[3].data[actPoint]=(-1*a[i].value).toFixed(3)),"power_returned_l2"==i&&(actElectrData.datasets[4].data[actPoint]=(-1*a[i].value).toFixed(3)),"power_returned_l3"==i&&(actElectrData.datasets[5].data[actPoint]=(-1*a[i].value).toFixed(3)),"gas_delivered"==i&&(actGasData.datasets[0].data[actPoint]=actPoint>0?(1e3*(a[i].value-gasDelivered)).toFixed(0):0,gasDelivered=a[i].value)}if(actPoint++,actPoint>maxPoints)for(let a=0;a<6;a++)actElectrData.labels.shift(),actElectrData.datasets[0].data.shift(),actElectrData.datasets[1].data.shift(),actElectrData.datasets[2].data.shift(),actElectrData.datasets[3].data.shift(),actElectrData.datasets[4].data.shift(),actElectrData.datasets[5].data.shift(),actGasData.labels.shift(),actGasData.datasets[0].data.shift(),actWaterData.labels.shift(),actWaterData.datasets[0].data.shift(),actPoint--}function initActualGraph(){actElectrData=createChartDataContainerWithStack(),actGasData=createChartDataContainerWithStack();var a=createDatasetBAR("false","red","Gebruikt L1","A");actElectrData.datasets.push(a);var t=createDatasetBAR("false","tomato","Gebruikt L2","A");actElectrData.datasets.push(t);var e=createDatasetBAR("false","salmon","Gebruikt L3","A");actElectrData.datasets.push(e);var r=createDatasetBAR("false","yellowgreen","Opgewekt L1","A");actElectrData.datasets.push(r);var s=createDatasetBAR("false","springgreen","Opgewekt L2","A");actElectrData.datasets.push(s);var l=createDatasetBAR("false","green","Opgewekt L3","A");actElectrData.datasets.push(l);var o=createDatasetLINE("false","blue","Gas verbruikt");"p1-q"==Dongle_Config&&(o.label="Warmte verbruikt"),actGasData.datasets.push(o),actPoint=0}function showActualGraph(){if("bActualTab"==activeTab){document.getElementById("actual").style.display="none",document.getElementById("dataChart").style.display="block",document.getElementById("gasChart").style.display="block",renderElectrChart(actElectrData,actElectrOptions),myElectrChart.update(),renderGasChart(actGasData);var a="dm3";"p1-q"==Dongle_Config&&(a="GJ * 1000"),myGasChart.options.scales.yAxes[0].scaleLabel.labelString=a,myGasChart.update()}}function formatGraphDate(a,t){let e="";if("Hours"==a)e="("+t.substring(4,6)+") "+t.substring(6,8);else if("Days"==a)e=[recidToWeekday(t),t.substring(4,6)+"-"+t.substring(2,4)];else if("Months"==a){let a=parseInt(t.substring(2,4));e=monthNames[a]}else e="Actual"==a?t.substring(6,8)+":"+t.substring(8,10)+":"+t.substring(10,12):"20"+t.substring(0,2)+"-"+t.substring(2,4)+"-"+t.substring(4,6)+":"+t.substring(6,8);return e}optionsWATER.scales.yAxes[0].scaleLabel.labelString="m3";
//# sourceMappingURL=/sm/28aaf141e4b1a485c686fed7210a849458f83e6f0f5c342b974bcadedda72201.map